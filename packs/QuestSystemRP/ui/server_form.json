{
  "namespace": "server_form",
  "_comment_header": "============================================================",
  "_comment_title": "QUEST SYSTEM - CUSTOM BUTTON TEXTURE OVERRIDE",
  "_comment_header2": "============================================================",
  "_comment_purpose": "This file overrides the default ActionFormData buttons with custom 9-slice textures.",
  "_comment_how_it_works": "We extend common_buttons.light_text_button to inherit all focus/controller navigation, then override the button content with custom textures.",
  "_comment_lessons_learned": "=== LESSONS LEARNED (for future agents) ===",
  "_comment_lesson1": "1. ALWAYS extend from common_buttons.light_text_button for form buttons - it has all controller/focus mappings built in.",
  "_comment_lesson2": "2. Override the $default_texture, $hover_texture, $pressed_texture variables OR use $button_content to replace the button internals.",
  "_comment_lesson3": "3. Use 'font_type: smooth' for crisp text rendering that matches vanilla.",
  "_comment_lesson4": "4. The 'nineslice_size' value should be ~12-16% of the texture size for good corner preservation.",
  "_comment_lesson5": "5. Button hover/pressed states use 'color' multiplier: >1.0 = brighter, <1.0 = darker.",
  "_comment_lesson6": "6. Do NOT set focus_container on dynamic_button - let the button itself handle focus.",
  "_comment_lesson7": "7. Controller support requires button_mappings for focused state, which common_buttons provides.",
  "_comment_textures_section": "=== BACKGROUND TEXTURE CONTENT PANELS ===",
  "_comment_texture_path": "Textures are located at: packs/QuestSystemRP/textures/quest_ui/",
  "quest_button_content_default": {
    "type": "panel",
    "size": [
      "100%",
      "100%"
    ],
    "controls": [
      {
        "bg": {
          "type": "image",
          "texture": "textures/quest_ui/quest_button_common",
          "size": [
            "100%",
            "100%"
          ],
          "nineslice_size": 10,
          "layer": 1
        }
      },
      {
        "text@common_buttons.default_text": {}
      }
    ]
  },
  "quest_button_content_hover": {
    "type": "panel",
    "size": [
      "100%",
      "100%"
    ],
    "controls": [
      {
        "bg": {
          "type": "image",
          "texture": "textures/quest_ui/quest_button_common",
          "size": [
            "100%",
            "100%"
          ],
          "nineslice_size": 10,
          "layer": 1,
          "color": [
            1.3,
            1.3,
            1.3,
            1.0
          ]
        }
      },
      {
        "text@common_buttons.hover_text": {}
      }
    ]
  },
  "quest_button_content_pressed": {
    "type": "panel",
    "size": [
      "100%",
      "100%"
    ],
    "controls": [
      {
        "bg": {
          "type": "image",
          "texture": "textures/quest_ui/quest_button_common",
          "size": [
            "100%",
            "100%"
          ],
          "nineslice_size": 10,
          "layer": 1,
          "color": [
            0.7,
            0.7,
            0.7,
            1.0
          ]
        }
      },
      {
        "text@common_buttons.pressed_text": {}
      }
    ]
  },
  "_comment_button_section": "=== CUSTOM BUTTON DEFINITION ===",
  "_comment_button_extends": "Extends common_buttons.light_text_button to inherit all controller/keyboard/focus support",
  "quest_form_button@common_buttons.light_text_button": {
    "$pressed_button_name": "button.form_button_click",
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "size": [
      "fill",
      32
    ],
    "layer": 2,
    "$button_text": "#form_button_text",
    "$button_text_binding_type": "collection",
    "$button_text_grid_collection_name": "form_buttons",
    "$button_text_max_size": [
      "100%",
      20
    ],
    "$default_button_content": "server_form.quest_button_content_default",
    "$hover_button_content": "server_form.quest_button_content_hover",
    "$pressed_button_content": "server_form.quest_button_content_pressed",
    "bindings": [
      {
        "binding_type": "collection_details",
        "binding_collection_name": "form_buttons"
      }
    ]
  },
  "_comment_override_section": "=== DYNAMIC BUTTON OVERRIDE ===",
  "_comment_dynamic_button": "This overrides the vanilla 'dynamic_button' element from server_form.json.",
  "_comment_icon_panel": "panel_name contains the icon image (from ActionFormData button textures).",
  "_comment_form_button": "form_button uses our custom quest_form_button which extends common_buttons.light_text_button.",
  "dynamic_button": {
    "type": "stack_panel",
    "size": [
      "100%",
      32
    ],
    "orientation": "horizontal",
    "controls": [
      {
        "panel_name": {
          "type": "panel",
          "size": [
            34,
            "100%c"
          ],
          "bindings": [
            {
              "binding_type": "view",
              "source_control_name": "image",
              "resolve_sibling_scope": true,
              "source_property_name": "(not (#texture = ''))",
              "target_property_name": "#visible"
            }
          ],
          "controls": [
            {
              "image": {
                "type": "image",
                "layer": 2,
                "size": [
                  32,
                  32
                ],
                "offset": [
                  0,
                  0
                ],
                "bindings": [
                  {
                    "binding_name": "#form_button_texture",
                    "binding_name_override": "#texture",
                    "binding_type": "collection",
                    "binding_collection_name": "form_buttons"
                  },
                  {
                    "binding_name": "#form_button_texture_file_system",
                    "binding_name_override": "#texture_file_system",
                    "binding_type": "collection",
                    "binding_collection_name": "form_buttons"
                  },
                  {
                    "binding_type": "view",
                    "source_property_name": "(not ((#texture = '') or (#texture = 'loading')))",
                    "target_property_name": "#visible"
                  }
                ]
              }
            },
            {
              "progress@progress.progress_loading_bars": {
                "size": [
                  30,
                  4
                ],
                "offset": [
                  -2,
                  16
                ],
                "bindings": [
                  {
                    "binding_type": "view",
                    "source_control_name": "image",
                    "resolve_sibling_scope": true,
                    "source_property_name": "(#texture = 'loading')",
                    "target_property_name": "#visible"
                  }
                ]
              }
            }
          ]
        }
      },
      {
        "form_button@server_form.quest_form_button": {}
      }
    ]
  },
  "_comment_future_section": "=== FUTURE ENHANCEMENTS ===",
  "_comment_future1": "To add rarity-based button textures (legendary, rare, epic):",
  "_comment_future2": "1. Create texture files: quest_button_legendary.png, quest_button_rare.png, etc.",
  "_comment_future3": "2. Create new content panels like quest_button_content_legendary_default, etc.",
  "_comment_future4": "3. Create new button types like quest_form_button_legendary that use those content panels.",
  "_comment_future5": "4. Modify the form generation in main.js to pass a rarity indicator.",
  "_comment_future6": "5. Use bindings or separate button factories to select the right button based on rarity."
}